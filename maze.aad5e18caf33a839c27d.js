!function(e){function t(t){for(var s,r,o=t[0],c=t[1],d=t[2],l=0,h=[];l<o.length;l++)r=o[l],a[r]&&h.push(a[r][0]),a[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);for(u&&u(t);h.length;)h.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var s={},a={0:0},i=[];function r(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var u=c;i.push([40,1]),n()}({15:function(e,t,n){e.exports={container:"elydE",version:"_1Wyat"}},23:function(e,t,n){e.exports={fireworks:"_2jtgr"}},40:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),i=n(17),r=n(4),o=n(14),c=n(3),d=n.n(c),u=n(0),l=n.n(u),h=n(2),p=n.n(h),m=n(5),w=n(10),f=n.n(w),v=n(21),b=n.n(v);const y=8,g=4,R=2,x=1,q=e=>[y+g,R+x].reduce((t,n)=>t||n&e&&15&~(n&e)&n,null);var D=n(15),k=n(7);class E extends s.PureComponent{constructor(e){super(e),this.handleSubmit=this.handleSubmit.bind(this),this.state={rows:e.rows,cols:e.cols}}handleChange(e){return t=>{const n=parseInt(t.target.value,10);Number.isNaN(n)||this.setState({[e]:n})}}handleSubmit(){localStorage.setItem("rows",this.state.rows),localStorage.setItem("cols",this.state.cols),this.props.restart(this.state)}render(){return a.a.createElement("header",null,a.a.createElement("h1",{className:p()(k.header)},"Maze"),a.a.createElement("div",{className:p()(k.options)},a.a.createElement("label",{className:p()(k.label),htmlFor:"rows"},"Rows"),a.a.createElement("input",{className:p()(k.input),value:this.state.rows,onChange:this.handleChange("rows"),id:"rows"}),a.a.createElement("label",{className:p()(k.label),htmlFor:"cols"},"Cols"),a.a.createElement("input",{className:p()(k.input),value:this.state.cols,onChange:this.handleChange("cols"),id:"cols"}),a.a.createElement("button",{className:p()(k.button),onClick:this.handleSubmit},"🔄︎")))}}d()(E,"propTypes",{rows:l.a.number.isRequired,cols:l.a.number.isRequired,restart:l.a.func.isRequired});const C=Object(m.createSelector)([e=>e.stats],e=>e);var j=Object(r.b)(C,e=>({restart:({rows:t,cols:n})=>e({type:"init",rows:t,cols:n})}))(E),O=n(6);class T extends s.Component{constructor(e){super(e),this.canvas=null}componentDidMount(){this.updateCanvas()}componentDidUpdate(){this.updateCanvas()}updateCanvas(){const e=this.props,t=e.maze,n=e.stats,s=n.width,a=n.height,i=n.padding,r=n.windowWidth,o=n.windowHeight,c=n.offsetX,d=n.offsetY;this.canvas.width=r+i,this.canvas.height=o+i;const u=this.canvas.getContext("2d");u.beginPath();for(const e of Object.entries(t)){var l=f()(e,2)[1];const t=l.walls,n=1+c+l.x*s,i=1+d+l.y*a;t&y&&(u.moveTo(n,i),u.lineTo(n+s,i)),t&g&&(u.moveTo(n,i+a),u.lineTo(n+s,i+a)),t&R&&(u.moveTo(n+s,i),u.lineTo(n+s,i+a)),t&x&&(u.moveTo(n,i),u.lineTo(n,i+a))}u.stroke()}render(){return a.a.createElement("canvas",{className:p()(O.canvas),ref:e=>this.canvas=e})}}d()(T,"propTypes",{maze:l.a.object,stats:l.a.shape({width:l.a.number.isRequired,height:l.a.number.isRequired,padding:l.a.number.isRequired,windowWidth:l.a.number.isRequired,windowHeight:l.a.number.isRequired,offsetX:l.a.number.isRequired,offsetY:l.a.number.isRequired}).isRequired});const S=Object(m.createSelector)([e=>e.maze,e=>e.stats],(e,t)=>({maze:e,stats:t}));var W=Object(r.b)(S)(T);class z extends s.Component{constructor(e){super(e),this.canvas=null}componentDidMount(){this.updateCanvas()}componentDidUpdate(){this.updateCanvas()}updateCanvas(){const e=this.props,t=e.cursor,n=e.stats,s=n.width,a=n.height,i=n.padding,r=n.windowWidth,o=n.windowHeight,c=n.offsetX,d=n.offsetY;if(this.canvas.width=r+i,this.canvas.height=o+i,this.props.won)return;const u=this.canvas.getContext("2d"),l=t.x*s+c+s/2,h=t.y*a+d+a/2;u.font=`${a/2}px sans-serif`,u.textAlign="center",u.textBaseline="middle",u.fillText("🏃",l,h,s-4)}render(){return a.a.createElement("canvas",{key:"canvas",className:p()(O.canvas),ref:e=>this.canvas=e})}}d()(z,"propTypes",{cursor:l.a.object.isRequired,won:l.a.bool.isRequired,stats:l.a.shape({width:l.a.number.isRequired,height:l.a.number.isRequired,padding:l.a.number.isRequired,windowWidth:l.a.number.isRequired,windowHeight:l.a.number.isRequired,offsetX:l.a.number.isRequired,offsetY:l.a.number.isRequired}).isRequired});const M=Object(m.createSelector)([e=>e.cursor,e=>e.stats,e=>e.end],(e,t,n)=>({cursor:e,stats:t,won:e.x===n.x&&e.y===n.y}));var N=Object(r.b)(M)(z);class H extends s.Component{constructor(e){super(e),this.canvas=null}componentDidMount(){this.updateCanvas()}componentDidUpdate(){this.updateCanvas()}updateCanvas(){const e=this.props,t=e.start,n=e.path,s=e.stats,a=s.width,i=s.height,r=s.padding,o=s.windowWidth,c=s.windowHeight,d=s.offsetX,u=s.offsetY;this.canvas.width=o+r,this.canvas.height=c+r;const l=this.canvas.getContext("2d");l.beginPath(),l.moveTo(t.x*a+a/2+d,t.y*i+i/2+u),l.strokeStyle="red";for(const e of n){const t=e.x*a+d,n=e.y*i+u;switch(e.direction){case y:l.lineTo(t+a/2,n);break;case g:l.lineTo(t+a/2,n+i);break;case R:l.lineTo(t+a,n+i/2);break;case x:l.lineTo(t,n+i/2)}}l.stroke()}render(){return a.a.createElement("canvas",{className:p()(O.canvas),ref:e=>this.canvas=e})}}d()(H,"propTypes",{path:l.a.array,start:l.a.object,stats:l.a.shape({width:l.a.number.isRequired,height:l.a.number.isRequired,padding:l.a.number.isRequired,windowWidth:l.a.number.isRequired,windowHeight:l.a.number.isRequired,offsetX:l.a.number.isRequired,offsetY:l.a.number.isRequired}).isRequired});const U=Object(m.createSelector)([e=>e.path,e=>e.start,e=>e.stats],(e,t,n)=>({path:e,start:t,stats:n}));var K=Object(r.b)(U)(H);class L extends s.Component{constructor(e){super(e),this.canvas=null}componentDidMount(){this.updateCanvas()}componentDidUpdate(){this.updateCanvas()}updateCanvas(){const e=this.props,t=e.end,n=e.stats,s=n.width,a=n.height,i=n.padding,r=n.windowWidth,o=n.windowHeight,c=n.offsetX,d=n.offsetY;this.canvas.width=r+i,this.canvas.height=o+i;const u=this.canvas.getContext("2d"),l=t.x*s+c+s/2,h=t.y*a+d+a/2;u.font=`${a/2}px sans-serif`,u.textAlign="center",u.textBaseline="middle",u.fillText("🌟",l,h,s)}render(){return a.a.createElement("canvas",{className:p()(O.canvas),ref:e=>this.canvas=e})}}d()(L,"propTypes",{end:l.a.object,stats:l.a.shape({width:l.a.number.isRequired,height:l.a.number.isRequired,padding:l.a.number.isRequired,windowWidth:l.a.number.isRequired,windowHeight:l.a.number.isRequired,offsetX:l.a.number.isRequired,offsetY:l.a.number.isRequired}).isRequired});const I=Object(m.createSelector)([e=>e.end,e=>e.stats],(e,t)=>({end:e,stats:t}));var _=Object(r.b)(I)(L),P=n(22),$=n.n(P),X=n(23);class Y extends s.PureComponent{constructor(e){super(e),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this)}componentDidMount(){this.fireworks=new $.a(this.container,{explosionChance:.02})}componentDidUpdate(){this.props.active?(document.addEventListener("keydown",this.handleDocumentKeyDown),this.fireworks.start()):(document.removeEventListener("keydown",this.handleDocumentKeyDown),this.fireworks.kill())}componentWillUnmount(){document.removeEventListener("keydown",this.handleDocumentKeyDown),this.fireworks.kill()}handleDocumentKeyDown(e){27===e.keyCode&&this.fireworks.stop()}render(){return a.a.createElement("div",{className:p()(X.fireworks),ref:e=>this.container=e})}}d()(Y,"propTypes",{active:l.a.bool.isRequired});var B=Y;class A extends s.Component{constructor(e){super(e),this.attached=!1,this.handleWindowResize=this.handleWindowResize.bind(this),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this)}componentDidMount(){window.addEventListener("resize",this.handleWindowResize),document.addEventListener("keydown",this.handleDocumentKeyDown),this.attached=!0}componentDidUpdate(){this.props.won?(document.removeEventListener("keydown",this.handleDocumentKeyDown),this.attached=!1):!1===this.attached&&document.addEventListener("keydown",this.handleDocumentKeyDown)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),document.removeEventListener("keydown",this.handleDocumentKeyDown)}handleDocumentKeyDown(e){switch(e.keyCode){case 38:case 87:return this.props.moveUp();case 40:case 83:return this.props.moveDown();case 37:case 65:return this.props.moveLeft();case 39:case 68:return this.props.moveRight()}}handleWindowResize(){this.props.resize({windowWidth:window.innerWidth,windowHeight:window.innerHeight})}render(){return a.a.createElement("div",{className:p()(D.container)},a.a.createElement(j,null),a.a.createElement(W,null),a.a.createElement(N,null),a.a.createElement(_,null),a.a.createElement(K,null),a.a.createElement(B,{active:this.props.won}),a.a.createElement("span",{className:p()(D.version)},"1.0.3"))}}d()(A,"propTypes",{resize:l.a.func.isRequired,moveUp:l.a.func.isRequired,moveDown:l.a.func.isRequired,moveLeft:l.a.func.isRequired,moveRight:l.a.func.isRequired,won:l.a.bool.isRequired});const F=Object(m.createSelector)([e=>e.cursor,e=>e.end],(e,t)=>({won:e.x===t.x&&e.y===t.y}));var J=Object(r.b)(F,e=>({resize:({width:t,height:n})=>e({type:"resize",width:t,height:n}),moveUp:()=>e({type:"move",direction:y}),moveDown:()=>e({type:"move",direction:g}),moveLeft:()=>e({type:"move",direction:x}),moveRight:()=>e({type:"move",direction:R})}))(A),Q=n(9),G=n(24),V=n(8),Z=n.n(V);const ee=({windowWidth:e,windowHeight:t,padding:n,rows:s,cols:a})=>({rows:s,cols:a,windowWidth:e,windowHeight:t,width:parseInt(e/a),height:parseInt(t/s),offsetX:0,offsetY:0,padding:n}),te={maze:{},cursor:{},stats:{padding:10},path:[]};var ne=(e=te,t)=>{if("init"===t.type)return Z()({},(e=>{let t=e.rows,n=e.cols;delete b()(e,["rows","cols"]).type;const s={};for(let e=0;e<n;e++)for(let n=0;n<t;n++)s[`${e},${n}`]={x:e,y:n,parent:null,dirs:15,walls:15};let a=null,i=null;const r=parseInt(Math.random()*n),o=parseInt(Math.random()*t);switch(1<<4*Math.random()){case y:i=0,a=r;break;case g:i=t-1,a=r;break;case R:a=n-1,i=o;break;case x:a=0,i=o}const c=s[`${a},${i}`];c.distance=0,c.parent=c;let d=c,u=null;for(;u!=c;)u=l(u||c);for(const e of Object.entries(s)){const t=f()(e,2)[1];delete t.parent,delete t.dirs,delete t.distance}return{maze:s,start:c,end:d,cursor:{x:a,y:i}};function l(e){for(;e.dirs;){let a=e.x,i=e.y;const r=1<<4*Math.random();if(~e.dirs&r)continue;if(e.dirs&=~r,r===y&&0===e.y)continue;if(r===g&&e.y+1>=t)continue;if(r===R&&e.x+1>=n)continue;if(r===x&&0===e.x)continue;switch(r){case R:a=e.x+1;break;case g:i=e.y+1;break;case x:a=e.x-1;break;case y:i=e.y-1}const o=q(r),c=s[`${a},${i}`];if(e.walls&r&&c.walls&o&&null===c.parent)return c.parent=e,e.walls&=~r,c.walls&=~o,c.distance=e.distance+1,c.distance>d.distance&&(d=c),c}return e.parent}})(t),{path:[],stats:ee(Z()({},e.stats,t))});if("resize"===t.type)return Z()({},e,{stats:ee(Z()({},e.stats,t))});if("move"===t.type){const n=e.maze,s=e.cursor,a=s.x,i=s.y,r=t.direction;if(n[`${a},${i}`].walls&r)return e;const o={x:a,y:i};switch(r){case y:o.y-=1;break;case g:o.y+=1;break;case R:o.x+=1;break;case x:o.x-=1}return Z()({},e,{path:[...e.path,{x:a,y:i,direction:r}],cursor:o})}return e};o.install({onUpdateReady(){o.applyUpdate()},onUpdated(){window.location.reload()}});const se=(e=>{const t=[];return"undefined"==typeof window&&t.push(Object(G.createLogger)()),Object(Q.c)(ne,e,Object(Q.a)(...t))})(),ae=parseInt(localStorage.getItem("rows"))||10,ie=parseInt(localStorage.getItem("cols"))||20;se.dispatch({type:"init",rows:ae,cols:ie,windowWidth:window.innerWidth,windowHeight:window.innerHeight}),Object(i.render)(a.a.createElement(r.a,{store:se},a.a.createElement(J,null)),document.getElementById("root"))},6:function(e,t,n){e.exports={canvas:"MpBMo"}},7:function(e,t,n){e.exports={header:"_2ksBO",options:"_7UMxk",input:"NBMQH",label:"_2lnwr",button:"_229SP"}}});